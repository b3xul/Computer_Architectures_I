PORTA EQU 80h
PORTB EQU PORTA+1
PORTC EQU PORTA+2
CONTROL EQU PORTA+3
DELAY EQU 5000

#START=8255.EXE#

.MODEL small
.STACK
.DATA
.CODE
.STARTUP
MOV DX,CONTROL
MOV AL,10010010b
OUT DX,AL

ciclo: IN AL,PORTA
MOV AH,AL
IN AL,PORTB
ADD AL,AH
JNO NO_overflow

MOV AL,0FFh

NO_overflow:OUT PORTC,AL

MOV CX,DELAY
attesa: LOOP attesa

JMP ciclo
 
.EXIT
END